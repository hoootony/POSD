<html>
	<head>
	<link href="../../third-party/google-code-prettify\prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	<script type="text/javascript" src="../../third-party/google-code-prettify\prettify.js"></script>
	</head>
	<title>
		compositetest.cpp
	</title>
	<body onload="prettyPrint()">
		<pre class="prettyprint lang-cpp linenums">#include "gtest\gtest.h"
#include "../MindMap/Composite.h"
#include "../MindMap/Node.h"

class CompositeTest : public ::testing::Test
{
protected:
	virtual void SetUp()
<span style = "background-color:#dfd">	{</span>
<span style = "background-color:#dfd">		_composite1 = new Node("Node1", 1);</span>
<span style = "background-color:#dfd">		_composite2 = new Node("Node2", 2);</span>
<span style = "background-color:#dfd">		_composite3 = new Node("Node3", 3);</span>
<span style = "background-color:#dfd">		_composite4 = new Node("Node4", 4);</span>

<span style = "background-color:#dfd">		_composite1-&gt;_nodeList.push_back(_composite2);</span>
<span style = "background-color:#dfd">		_composite2-&gt;setParent(_composite1);</span>

<span style = "background-color:#dfd">		_composite1-&gt;_nodeList.push_back(_composite3);</span>
<span style = "background-color:#dfd">		_composite3-&gt;setParent(_composite1);</span>

<span style = "background-color:#dfd">		_composite2-&gt;_nodeList.push_back(_composite4);</span>
<span style = "background-color:#dfd">		_composite4-&gt;setParent(_composite2);</span>
<span style = "background-color:#dfd">	}</span>
	virtual void TearDown()
<span style = "background-color:#dfd">	{</span>
<span style = "background-color:#dfd">		delete _composite1;</span>
<span style = "background-color:#dfd">		delete _composite2;</span>
<span style = "background-color:#dfd">		delete _composite3;</span>
<span style = "background-color:#dfd">		delete _composite4;</span>
<span style = "background-color:#dfd">	}</span>
	Composite *_composite1, *_composite2, *_composite3, *_composite4;
};

<span style = "background-color:#dfd">TEST_F(CompositeTest, addChild)</span>
<span style = "background-color:#dfd">{</span>
<span style = "background-color:#dfd">	Composite *newNode = new Node("newNode", 5);</span>
<span style = "background-color:#dfd">	_composite2-&gt;addChild(newNode);</span>
<span style = "background-color:#dfd">	ASSERT_EQ(_composite2, newNode-&gt;getParent());</span>
<span style = "background-color:#dfd">	ASSERT_TRUE(_composite2-&gt;isChild(newNode));</span>
<span style = "background-color:#dfd">}</span>

<span style = "background-color:#dfd">TEST_F(CompositeTest, removeChild)</span>
<span style = "background-color:#dfd">{</span>
<span style = "background-color:#dfd">	_composite1-&gt;removeChild(_composite3);</span>
<span style = "background-color:#dfd">	ASSERT_FALSE(_composite1-&gt;isChild(_composite3));</span>
<span style = "background-color:#dfd">}</span>

<span style = "background-color:#dfd">TEST_F(CompositeTest, isChild)</span>
<span style = "background-color:#dfd">{</span>
<span style = "background-color:#dfd">	ASSERT_TRUE(_composite1-&gt;isChild(_composite2));</span>
<span style = "background-color:#dfd">	ASSERT_TRUE(_composite1-&gt;isChild(_composite3));</span>
<span style = "background-color:#dfd">	ASSERT_FALSE(_composite2-&gt;isChild(_composite1));</span>
<span style = "background-color:#dfd">	ASSERT_FALSE(_composite3-&gt;isChild(_composite2));</span>
	//ASSERT_FALSE(_composite3-&gt;isChild(_composite3));
<span style = "background-color:#dfd">}</span>

<span style = "background-color:#dfd">TEST_F(CompositeTest, haveSibling)</span>
<span style = "background-color:#dfd">{</span>
<span style = "background-color:#dfd">	ASSERT_FALSE(_composite1-&gt;haveSibling());</span>
<span style = "background-color:#dfd">	ASSERT_TRUE(_composite2-&gt;haveSibling());</span>
<span style = "background-color:#dfd">	ASSERT_FALSE(_composite3-&gt;haveSibling());</span>
<span style = "background-color:#dfd">}</span>

<span style = "background-color:#dfd">TEST_F(CompositeTest, getMap)</span>
<span style = "background-color:#dfd">{</span>
<span style = "background-color:#dfd">	stringstream ss;</span>
<span style = "background-color:#dfd">	ss &lt;&lt; "¡Ï¡ÐNode1(Node,ID:1)" &lt;&lt; endl;</span>
<span style = "background-color:#dfd">	ss &lt;&lt; "¡@¡@¡Ï¡ÐNode2(Node,ID:2)" &lt;&lt; endl;</span>
<span style = "background-color:#dfd">	ss &lt;&lt; "¡@¡@¡U¡@¡Ï¡ÐNode4(Node,ID:4)" &lt;&lt; endl;</span>
<span style = "background-color:#dfd">	ss &lt;&lt; "¡@¡@¡Ï¡ÐNode3(Node,ID:3)" &lt;&lt; endl;</span>
<span style = "background-color:#dfd">	ASSERT_EQ(ss.str(), _composite1-&gt;getMap(1).str());</span>
<span style = "background-color:#dfd">}</span>
</pre>
	</body>
</html>